[Interface]
Address = <%= node['algo']['wireguard']['ipv4'] %>,<%= node['algo']['wireguard']['ipv6'] %>
ListenPort = <%= node['algo']['wireguard']['config']['Interface']['ListenPort'] %>
PrivateKey = <%= @Interface['PrivateKey'] %>
SaveConfig = false

<% @Peers.each do |peer| %>

[Peer]
# <%= peer['Name'] %>
PublicKey = <%= peer['PublicKey'] %>
AllowedIPs = <%= peer['Address'].map { |ip| IPAddress(ip).to_s }.join(",") %>
<% end %>

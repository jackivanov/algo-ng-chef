[Interface]
Address = <%= node['algo']['wireguard']['config']['Interface']['Address'].flatten.join(',') %>
ListenPort = <%= node['algo']['wireguard']['config']['Interface']['ListenPort'] %>
PrivateKey = <%= @Interface['PrivateKey'] %>
SaveConfig = false

<% @Peers.each do |peer| %>

[Peer]
# <%= peer['Name'] %>
PublicKey = <%= peer['PublicKey'] %>
AllowedIPs = <%= peer['Address'].join(',') %>
<% end %>
